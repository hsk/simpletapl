# 図24-1. 存在型

新しい構文形式

t ::= ... 項:
  {*T,t} as T パッケージ化
  let {X,x}=t in t アンパッケージ化

v ::= ... 値:
  {*T,v} as T パッケージの値

T ::= ... 型:
  {∃ X,T} 存在型

新しい評価規則 t ==> t'

let {X,x} = ({*T11,v12}as T1) in t2
==> [X->T11][x->v12]t2                  (E-UnpackPack)

t12 ==> t12'
------------------------ (E-Pack)
{*T11,t12} as T1
==> {*T11,t12'} as T1

t1 ==> t1'
----------------------- (E-Unpack)
let {X,x}=t1 in t2
==> let {X,x}=t1' in t2

新しい型付け規則 Γ |- t : T

Γ |- t2 : [X -> U] T2
--------------------------------------- (T-Pack)
Γ |- {*U, t2} as {∃ X, T2} : {∃ X, T2}


Γ |- t1 : {∃ X, T12}
Γ,X,x:T12 |- t2 : T2
-------------------------------- (T-Unpack)
Γ |- let {X,x}=t1 in t2 : T2


